// Copyright (c) 2019, Andrew Kay
//
// Permission to use, copy, modify, and/or distribute this software for any
// purpose with or without fee is hereby granted, provided that the above
// copyright notice and this permission notice appear in all copies.
//
// THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
// WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
// MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
// ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
// WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
// ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
// OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.

#include <Arduino.h>

#include "CoaxTransceiver.h"

uint16_t buffer[1024] = {
    0x0031, 0x0200, 0x0206, 0x020a, 0x020c, 0x0212, 0x0214, 0x0218, 0x021e, 0x0222, 0x0224, 0x0228, 0x022e, 0x0230, 0x0236, 0x023a, 0x023c, 0x0242, 0x0244, 0x0248, 0x024e, 0x0250, 0x0256, 0x025a, 0x025c, 0x0260, 0x0266, 0x026a, 0x026c, 0x0272, 0x0274, 0x0278, 0x027e, 0x0282, 0x0284, 0x0288, 0x028e, 0x0290, 0x0296, 0x029a, 0x029c, 0x02a0, 0x02a6, 0x02aa, 0x02ac, 0x02b2, 0x02b4, 0x02b8, 0x02be, 0x02c0, 0x02c6, 0x02ca, 0x02cc, 0x02d2, 0x02d4, 0x02d8, 0x02de, 0x02e2, 0x02e4, 0x0200, 0x0206, 0x020a, 0x020c, 0x0212, 0x0214, 0x0218, 0x021e, 0x0222, 0x0224, 0x0228, 0x022e, 0x0230, 0x0236, 0x023a, 0x023c, 0x0242, 0x0244, 0x0248, 0x024e, 0x0250, 0x0256, 0x025a, 0x025c, 0x0260, 0x0266, 0x026a, 0x026c, 0x0272, 0x0274, 0x0278, 0x027e, 0x0282, 0x0284, 0x0288, 0x028e, 0x0290, 0x0296, 0x029a, 0x029c, 0x02a0, 0x02a6, 0x02aa, 0x02ac, 0x02b2, 0x02b4, 0x02b8, 0x02be, 0x02c0, 0x02c6, 0x02ca, 0x02cc, 0x02d2, 0x02d4, 0x02d8, 0x02de, 0x02e2, 0x02e4, 0x0200, 0x0206, 0x020a, 0x020c, 0x0212, 0x0214, 0x0218, 0x021e, 0x0222, 0x0224, 0x0228, 0x022e, 0x0230, 0x0236, 0x023a, 0x023c, 0x0242, 0x0244, 0x0248, 0x024e, 0x0250, 0x0256, 0x025a, 0x025c, 0x0260, 0x0266, 0x026a, 0x026c, 0x0272, 0x0274, 0x0278, 0x027e, 0x0282, 0x0284, 0x0288, 0x028e, 0x0290, 0x0296, 0x029a, 0x029c, 0x02a0, 0x02a6, 0x02aa, 0x02ac, 0x02b2, 0x02b4, 0x02b8, 0x02be, 0x02c0, 0x02c6, 0x02ca, 0x02cc, 0x02d2, 0x02d4, 0x02d8, 0x02de, 0x02e2, 0x02e4, 0x0200, 0x0206, 0x020a, 0x020c, 0x0212, 0x0214, 0x0218, 0x021e, 0x0222, 0x0224, 0x0228, 0x022e, 0x0230, 0x0236, 0x023a, 0x023c, 0x0242, 0x0244, 0x0248, 0x024e, 0x0250, 0x0256, 0x025a, 0x025c, 0x0260, 0x0266, 0x026a, 0x026c, 0x0272, 0x0274, 0x0278, 0x027e, 0x0282, 0x0284, 0x0288, 0x028e, 0x0290, 0x0296, 0x029a, 0x029c, 0x02a0, 0x02a6, 0x02aa, 0x02ac, 0x02b2, 0x02b4, 0x02b8, 0x02be, 0x02c0, 0x02c6, 0x02ca, 0x02cc, 0x02d2, 0x02d4, 0x02d8, 0x02de, 0x02e2, 0x02e4, 0x0200, 0x0206, 0x020a, 0x020c, 0x0212, 0x0214, 0x0218, 0x021e, 0x0222, 0x0224, 0x0228, 0x022e, 0x0230, 0x0236, 0x023a, 0x023c, 0x0242, 0x0244, 0x0248, 0x024e, 0x0250, 0x0256, 0x025a, 0x025c, 0x0260, 0x0266, 0x026a, 0x026c, 0x0272, 0x0274, 0x0278, 0x027e, 0x0282, 0x0284, 0x0288, 0x028e, 0x0290, 0x0296, 0x029a, 0x029c, 0x02a0, 0x02a6, 0x02aa, 0x02ac, 0x02b2, 0x02b4, 0x02b8, 0x02be, 0x02c0, 0x02c6, 0x02ca, 0x02cc, 0x02d2, 0x02d4, 0x02d8, 0x02de, 0x02e2, 0x02e4, 0x0200, 0x0206, 0x020a, 0x020c, 0x0212, 0x0214, 0x0218, 0x021e, 0x0222, 0x0224, 0x0228, 0x022e, 0x0230, 0x0236, 0x023a, 0x023c, 0x0242, 0x0244, 0x0248, 0x024e, 0x0250, 0x0256, 0x025a, 0x025c, 0x0260, 0x0266, 0x026a, 0x026c, 0x0272, 0x0274, 0x0278, 0x027e, 0x0282, 0x0284, 0x0288, 0x028e, 0x0290, 0x0296, 0x029a, 0x029c, 0x02a0, 0x02a6, 0x02aa, 0x02ac, 0x02b2, 0x02b4, 0x02b8, 0x02be, 0x02c0, 0x02c6, 0x02ca, 0x02cc, 0x02d2, 0x02d4, 0x02d8, 0x02de, 0x02e2, 0x02e4, 0x0200, 0x0206, 0x020a, 0x020c, 0x0212, 0x0214, 0x0218, 0x021e, 0x0222, 0x0224, 0x0228, 0x022e, 0x0230, 0x0236, 0x023a, 0x023c, 0x0242, 0x0244, 0x0248, 0x024e, 0x0250, 0x0256, 0x025a, 0x025c, 0x0260, 0x0266, 0x026a, 0x026c, 0x0272, 0x0274, 0x0278, 0x027e, 0x0282, 0x0284, 0x0288, 0x028e, 0x0290, 0x0296, 0x029a, 0x029c, 0x02a0, 0x02a6, 0x02aa, 0x02ac, 0x02b2, 0x02b4, 0x02b8, 0x02be, 0x02c0, 0x02c6, 0x02ca, 0x02cc, 0x02d2, 0x02d4, 0x02d8, 0x02de, 0x02e2, 0x02e4, 0x0200, 0x0206, 0x020a, 0x020c, 0x0212, 0x0214, 0x0218, 0x021e, 0x0222, 0x0224, 0x0228, 0x022e, 0x0230, 0x0236, 0x023a, 0x023c, 0x0242, 0x0244, 0x0248, 0x024e, 0x0250, 0x0256, 0x025a, 0x025c, 0x0260, 0x0266, 0x026a, 0x026c, 0x0272, 0x0274, 0x0278, 0x027e, 0x0282, 0x0284, 0x0288, 0x028e, 0x0290, 0x0296, 0x029a, 0x029c, 0x02a0, 0x02a6, 0x02aa, 0x02ac, 0x02b2, 0x02b4, 0x02b8, 0x02be, 0x02c0, 0x02c6, 0x02ca, 0x02cc, 0x02d2, 0x02d4, 0x02d8, 0x02de, 0x02e2, 0x02e4, 0x0200, 0x0206, 0x020a, 0x020c, 0x0212, 0x0214, 0x0218, 0x021e, 0x0222, 0x0224, 0x0228, 0x022e, 0x0230, 0x0236, 0x023a, 0x023c, 0x0242, 0x0244, 0x0248, 0x024e, 0x0250, 0x0256, 0x025a, 0x025c, 0x0260, 0x0266, 0x026a, 0x026c, 0x0272, 0x0274, 0x0278, 0x027e, 0x0282, 0x0284, 0x0288, 0x028e, 0x0290, 0x0296, 0x029a, 0x029c, 0x02a0, 0x02a6, 0x02aa, 0x02ac, 0x02b2, 0x02b4, 0x02b8, 0x02be, 0x02c0, 0x02c6, 0x02ca, 0x02cc, 0x02d2, 0x02d4, 0x02d8, 0x02de, 0x02e2, 0x02e4, 0x0200, 0x0206, 0x020a, 0x020c, 0x0212, 0x0214, 0x0218, 0x021e, 0x0222, 0x0224, 0x0228, 0x022e, 0x0230, 0x0236, 0x023a, 0x023c, 0x0242, 0x0244, 0x0248, 0x024e, 0x0250, 0x0256, 0x025a, 0x025c, 0x0260, 0x0266, 0x026a, 0x026c, 0x0272, 0x0274, 0x0278, 0x027e, 0x0282, 0x0284, 0x0288, 0x028e, 0x0290, 0x0296, 0x029a, 0x029c, 0x02a0, 0x02a6, 0x02aa, 0x02ac, 0x02b2, 0x02b4, 0x02b8, 0x02be, 0x02c0, 0x02c6, 0x02ca, 0x02cc, 0x02d2, 0x02d4, 0x02d8, 0x02de, 0x02e2, 0x02e4, 0x0200, 0x0206, 0x020a, 0x020c, 0x0212, 0x0214, 0x0218, 0x021e, 0x0222, 0x0224, 0x0228, 0x022e, 0x0230, 0x0236, 0x023a, 0x023c, 0x0242, 0x0244, 0x0248, 0x024e, 0x0250, 0x0256, 0x025a, 0x025c, 0x0260, 0x0266, 0x026a, 0x026c, 0x0272, 0x0274, 0x0278, 0x027e, 0x0282, 0x0284, 0x0288, 0x028e, 0x0290, 0x0296, 0x029a, 0x029c, 0x02a0, 0x02a6, 0x02aa, 0x02ac, 0x02b2, 0x02b4, 0x02b8, 0x02be, 0x02c0, 0x02c6, 0x02ca, 0x02cc, 0x02d2, 0x02d4, 0x02d8, 0x02de, 0x02e2, 0x02e4, 0x0200, 0x0206, 0x020a, 0x020c, 0x0212, 0x0214, 0x0218, 0x021e, 0x0222, 0x0224, 0x0228, 0x022e, 0x0230, 0x0236, 0x023a, 0x023c, 0x0242, 0x0244, 0x0248, 0x024e, 0x0250, 0x0256, 0x025a, 0x025c, 0x0260, 0x0266, 0x026a, 0x026c, 0x0272, 0x0274, 0x0278, 0x027e, 0x0282, 0x0284, 0x0288, 0x028e, 0x0290, 0x0296, 0x029a, 0x029c, 0x02a0, 0x02a6, 0x02aa, 0x02ac, 0x02b2, 0x02b4, 0x02b8, 0x02be, 0x02c0, 0x02c6, 0x02ca, 0x02cc, 0x02d2, 0x02d4, 0x02d8, 0x02de, 0x02e2, 0x02e4, 0x0200, 0x0206, 0x020a, 0x020c, 0x0212, 0x0214, 0x0218, 0x021e, 0x0222, 0x0224, 0x0228, 0x022e, 0x0230, 0x0236, 0x023a, 0x023c, 0x0242, 0x0244, 0x0248, 0x024e, 0x0250, 0x0256, 0x025a, 0x025c, 0x0260, 0x0266, 0x026a, 0x026c, 0x0272, 0x0274, 0x0278, 0x027e, 0x0282, 0x0284, 0x0288, 0x028e, 0x0290, 0x0296, 0x029a, 0x029c, 0x02a0, 0x02a6, 0x02aa, 0x02ac, 0x02b2, 0x02b4, 0x02b8, 0x02be, 0x02c0, 0x02c6, 0x02ca, 0x02cc, 0x02d2, 0x02d4, 0x02d8, 0x02de, 0x02e2, 0x02e4, 0x0200, 0x0206, 0x020a, 0x020c, 0x0212, 0x0214, 0x0218, 0x021e, 0x0222, 0x0224, 0x0228, 0x022e, 0x0230, 0x0236, 0x023a, 0x023c, 0x0242, 0x0244, 0x0248, 0x024e, 0x0250, 0x0256, 0x025a, 0x025c, 0x0260, 0x0266, 0x026a, 0x026c, 0x0272, 0x0274, 0x0278, 0x027e, 0x0282, 0x0284, 0x0288, 0x028e, 0x0290, 0x0296, 0x029a, 0x029c, 0x02a0, 0x02a6, 0x02aa, 0x02ac, 0x02b2, 0x02b4, 0x02b8, 0x02be, 0x02c0, 0x02c6, 0x02ca, 0x02cc, 0x02d2, 0x02d4, 0x02d8, 0x02de, 0x02e2, 0x02e4, 0x0200, 0x0206, 0x020a, 0x020c, 0x0212, 0x0214, 0x0218, 0x021e, 0x0222, 0x0224, 0x0228, 0x022e, 0x0230, 0x0236, 0x023a, 0x023c, 0x0242, 0x0244, 0x0248, 0x024e, 0x0250, 0x0256, 0x025a, 0x025c, 0x0260, 0x0266, 0x026a, 0x026c, 0x0272, 0x0274, 0x0278, 0x027e, 0x0282, 0x0284, 0x0288, 0x028e, 0x0290, 0x0296, 0x029a, 0x029c, 0x02a0, 0x02a6, 0x02aa, 0x02ac, 0x02b2, 0x02b4, 0x02b8, 0x02be, 0x02c0, 0x02c6, 0x02ca, 0x02cc, 0x02d2, 0x02d4, 0x02d8, 0x02de, 0x02e2, 0x02e4, 0x0200, 0x0206, 0x020a, 0x020c, 0x0212, 0x0214, 0x0218, 0x021e, 0x0222, 0x0224, 0x0228, 0x022e, 0x0230, 0x0236, 0x023a, 0x023c, 0x0242, 0x0244, 0x0248, 0x024e, 0x0250, 0x0256, 0x025a, 0x025c, 0x0260, 0x0266, 0x026a, 0x026c, 0x0272, 0x0274, 0x0278, 0x027e, 0x0282, 0x0284, 0x0288, 0x028e, 0x0290, 0x0296, 0x029a, 0x029c, 0x02a0, 0x02a6, 0x02aa, 0x02ac, 0x02b2, 0x02b4, 0x02b8, 0x02be, 0x02c0, 0x02c6, 0x02ca, 0x02cc, 0x02d2, 0x02d4, 0x02d8, 0x02de, 0x02e2, 0x02e4, 0x0200, 0x0206, 0x020a, 0x020c, 0x0212, 0x0214, 0x0218, 0x021e, 0x0222, 0x0224, 0x0228, 0x022e, 0x0230, 0x0236, 0x023a, 0x023c, 0x0242, 0x0244, 0x0248, 0x024e, 0x0250, 0x0256, 0x025a, 0x025c, 0x0260, 0x0266, 0x026a, 0x026c, 0x0272, 0x0274, 0x0278, 0x027e, 0x0282, 0x0284, 0x0288, 0x028e, 0x0290, 0x0296, 0x029a, 0x029c, 0x02a0, 0x02a6, 0x02aa, 0x02ac, 0x02b2, 0x02b4, 0x02b8, 0x02be, 0x02c0, 0x02c6, 0x02ca, 0x02cc, 0x02d2, 0x02d4, 0x02d8, 0x02de, 0x02e2, 0x02e4, 0x0200, 0x0206, 0x020a, 0x020c, 0x0212, 0x0214, 0x0218, 0x021e, 0x0222, 0x0224, 0x0228, 0x022e, 0x0230, 0x0236, 0x023a, 0x023c, 0x0242, 0x0244, 0x0248, 0x024e, 0x0250, 0x0256, 0x025a, 0x025c, 0x0260, 0x0266, 0x026a, 0x026c, 0x0272, 0x0274, 0x0278, 0x027e, 0x0282, 0x0284, 0x0288, 0x028e, 0x0290 };

void setup()
{
    // Configure serial port and state machine.
    Serial.begin(115200);

    while (Serial.available() > 0) {
        Serial.read();
    }

    // Configure the transceiver.
    CoaxTransceiver::setup();
}

void loop()
{
    for (int length = 2; length < 1024; length++) {
        CoaxTransceiver::transmit(buffer, length);

        delay(1);
    }

    delay(10000);
}
